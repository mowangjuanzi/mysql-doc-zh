
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <title>模式匹配 · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.7">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="counting-rows.html" />
    
    
    <link rel="prev" href="working-with-null.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="preface.html">
            
                <a href="preface.html">
            
                    
                    前言和法律条款
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="installing.html">
            
                <a href="installing.html">
            
                    
                    安装和更新 MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="linux-installation.html">
            
                <a href="linux-installation.html">
            
                    
                    在 Linux 上安装 MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="linux-installation-apt-repo.html">
            
                <a href="linux-installation-apt-repo.html">
            
                    
                    在 Linux 上使用 APT 库安装 MySQL
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="linux-installation-docker.html">
            
                <a href="linux-installation-docker.html">
            
                    
                    在 Linux 上使用 Docker 部署 MySQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.1" data-path="docker-mysql-getting-started.html">
            
                <a href="docker-mysql-getting-started.html">
            
                    
                    使用 Docker 部署 MySQL 服务器的基本步骤
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2" data-path="docker-mysql-more-topics.html">
            
                <a href="docker-mysql-more-topics.html">
            
                    
                    使用 Docker 部署 MySQL 服务器的更多主题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="tutorial.html">
            
                <a href="tutorial.html">
            
                    
                    教程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="connecting-disconnecting.html">
            
                <a href="connecting-disconnecting.html">
            
                    
                    连接到服务器和从服务器断开
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="entering-queries.html">
            
                <a href="entering-queries.html">
            
                    
                    输入查询
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="database-use.html">
            
                <a href="database-use.html">
            
                    
                    创建和使用数据库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="creating-database.html">
            
                <a href="creating-database.html">
            
                    
                    创建和选择数据库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="creating-tables.html">
            
                <a href="creating-tables.html">
            
                    
                    创建表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.3" data-path="loading-tables.html">
            
                <a href="loading-tables.html">
            
                    
                    将数据加载到表中
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4" data-path="retrieving-data.html">
            
                <a href="retrieving-data.html">
            
                    
                    从表中检索数据
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.4.1" data-path="selecting-all.html">
            
                <a href="selecting-all.html">
            
                    
                    选择所有数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.2" data-path="selecting-rows.html">
            
                <a href="selecting-rows.html">
            
                    
                    选择特定行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.3" data-path="selecting-columns.html">
            
                <a href="selecting-columns.html">
            
                    
                    选择指定列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.4" data-path="sorting-rows.html">
            
                <a href="sorting-rows.html">
            
                    
                    行排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.5" data-path="date-calculations.html">
            
                <a href="date-calculations.html">
            
                    
                    日期计算
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.6" data-path="working-with-null.html">
            
                <a href="working-with-null.html">
            
                    
                    处理 NULL 值
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.3.4.7" data-path="pattern-matching.html">
            
                <a href="pattern-matching.html">
            
                    
                    模式匹配
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.8" data-path="counting-rows.html">
            
                <a href="counting-rows.html">
            
                    
                    计算行数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.4.9" data-path="multiple-tables.html">
            
                <a href="multiple-tables.html">
            
                    
                    使用多个表
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="getting-information.html">
            
                <a href="getting-information.html">
            
                    
                    获取数据库和表的信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="batch-mode.html">
            
                <a href="batch-mode.html">
            
                    
                    在批处理模式使用 mysql
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="examples.html">
            
                <a href="examples.html">
            
                    
                    常见查询示例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.1" data-path="example-maximum-column.html">
            
                <a href="example-maximum-column.html">
            
                    
                    列的最大值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.2" data-path="example-maximum-row.html">
            
                <a href="example-maximum-row.html">
            
                    
                    包含某一行最大值的记录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.3" data-path="example-maximum-column-group.html">
            
                <a href="example-maximum-column-group.html">
            
                    
                    每组中列的最大值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.4" data-path="example-maximum-column-group-row.html">
            
                <a href="example-maximum-column-group-row.html">
            
                    
                    拥有某个字段的组间最大值的行
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.5" data-path="example-user-variables.html">
            
                <a href="example-user-variables.html">
            
                    
                    使用用户自定义变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.6" data-path="example-foreign-keys.html">
            
                <a href="example-foreign-keys.html">
            
                    
                    使用外键
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.7" data-path="searching-on-two-keys.html">
            
                <a href="searching-on-two-keys.html">
            
                    
                    两个键上搜索
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.8" data-path="calculating-days.html">
            
                <a href="calculating-days.html">
            
                    
                    计算每日访问量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.9" data-path="example-auto-increment.html">
            
                <a href="example-auto-increment.html">
            
                    
                    使用 AUTO_INCREMENT
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="apache.html">
            
                <a href="apache.html">
            
                    
                    在 Apache 中使用 MySQL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="programs.html">
            
                <a href="programs.html">
            
                    
                    MySQL 程序
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="programs-client.html">
            
                <a href="programs-client.html">
            
                    
                    MySQL 客户端程序
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="mysql.html">
            
                <a href="mysql.html">
            
                    
                    mysql — MySQL 命令行客户端
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="optimization.html">
            
                <a href="optimization.html">
            
                    
                    优化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="optimize-overview.html">
            
                <a href="optimize-overview.html">
            
                    
                    优化概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="statement-optimization.html">
            
                <a href="statement-optimization.html">
            
                    
                    优化 SQL 语句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="optimization-indexes.html">
            
                <a href="optimization-indexes.html">
            
                    
                    优化和索引
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="optimizing-database-structure.html">
            
                <a href="optimizing-database-structure.html">
            
                    
                    优化数据库结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="optimizing-innodb.html">
            
                <a href="optimizing-innodb.html">
            
                    
                    优化 InnoDB 表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="optimizing-myisam.html">
            
                <a href="optimizing-myisam.html">
            
                    
                    优化 MyISAM 表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="optimizing-memory-tables.html">
            
                <a href="optimizing-memory-tables.html">
            
                    
                    优化 MEMORY 表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="execution-plan-information.html">
            
                <a href="execution-plan-information.html">
            
                    
                    理解查询执行计划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="controlling-optimizer.html">
            
                <a href="controlling-optimizer.html">
            
                    
                    控制查询优化器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="buffering-caching.html">
            
                <a href="buffering-caching.html">
            
                    
                    缓冲和缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.11" data-path="locking-issues.html">
            
                <a href="locking-issues.html">
            
                    
                    优化锁操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.12" data-path="optimizing-server.html">
            
                <a href="optimizing-server.html">
            
                    
                    优化 MySQL 服务器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.13" data-path="optimize-benchmarking.html">
            
                <a href="optimize-benchmarking.html">
            
                    
                    测量性能 (Benchmarking)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.14" data-path="thread-information.html">
            
                <a href="thread-information.html">
            
                    
                    检查线程信息
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="data-types.html">
            
                <a href="data-types.html">
            
                    
                    数据类型
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            本书使用 HonKit 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >模式匹配</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h4 id="3347-模式匹配">3.3.4.7 模式匹配</h4>
<p>MySQL 提供了标准的 <a href="GLOSSARY.html#sql" class="glossary-term" title="The Structured Query Language that is standard for performing database operations. Often divided into the categories DDL, DML, and queries. MySQL includes some additional statement categories such as replication. See Chapter 9, Language Structure for the building blocks of SQL syntax, Chapter 11, Data Types for the data types to use for MySQL table columns, Chapter 13, SQL Statements for details about SQL statements and their associated categories, and Chapter 12, Functions and Operators for standard and MySQL-specific functions to use in queries.">SQL</a> 模式匹配, 以及一种基于扩展正则表达式的模式匹配形式, 类似于 Unix 的工具, 如 <code>vi</code>, <code>grep</code>, 和 <code>sed</code>.</p>
<p><a href="GLOSSARY.html#sql" class="glossary-term" title="The Structured Query Language that is standard for performing database operations. Often divided into the categories DDL, DML, and queries. MySQL includes some additional statement categories such as replication. See Chapter 9, Language Structure for the building blocks of SQL syntax, Chapter 11, Data Types for the data types to use for MySQL table columns, Chapter 13, SQL Statements for details about SQL statements and their associated categories, and Chapter 12, Functions and Operators for standard and MySQL-specific functions to use in queries.">SQL</a> 模式匹配允许使用 <code>_</code> 匹配任何单个字符, <code>%</code> 匹配任意数量的字符(包含零个字符). 在 MySQL 中, <a href="GLOSSARY.html#sql" class="glossary-term" title="The Structured Query Language that is standard for performing database operations. Often divided into the categories DDL, DML, and queries. MySQL includes some additional statement categories such as replication. See Chapter 9, Language Structure for the building blocks of SQL syntax, Chapter 11, Data Types for the data types to use for MySQL table columns, Chapter 13, SQL Statements for details about SQL statements and their associated categories, and Chapter 12, Functions and Operators for standard and MySQL-specific functions to use in queries.">SQL</a> 匹配默认不区分大小写. 这里展示了一些示例. 当你使用 <a href="GLOSSARY.html#sql" class="glossary-term" title="The Structured Query Language that is standard for performing database operations. Often divided into the categories DDL, DML, and queries. MySQL includes some additional statement categories such as replication. See Chapter 9, Language Structure for the building blocks of SQL syntax, Chapter 11, Data Types for the data types to use for MySQL table columns, Chapter 13, SQL Statements for details about SQL statements and their associated categories, and Chapter 12, Functions and Operators for standard and MySQL-specific functions to use in queries.">SQL</a> 模式时不要使用 <code>=</code> 或者 <code>&lt;&gt;</code>. 而是使用 <a href="https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_like" target="_blank"><code>LIKE</code></a> 或者 <a href="https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_not-like" target="_blank"><code>NOT LIKE</code></a> 比较运算符.</p>
<p>找出 <code>b</code>开头的 name:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&apos;b%&apos;</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> owner  <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> Buffy  <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-05</span><span class="hljs-number">-13</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Bowser <span class="hljs-operator">|</span> Diane  <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-08</span><span class="hljs-number">-31</span> <span class="hljs-operator">|</span> <span class="hljs-number">1995</span><span class="hljs-number">-07</span><span class="hljs-number">-29</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+------------+</span>
</code></pre>
<p>找出 <code>fy</code> 结尾的 name:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&apos;%fy&apos;</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> owner  <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> Fluffy <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> cat     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1993</span><span class="hljs-number">-02</span><span class="hljs-number">-04</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Buffy  <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-05</span><span class="hljs-number">-13</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+-------+</span>
</code></pre>
<p>找出包含 <code>w</code> 的 name:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&apos;%w%&apos;</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> name     <span class="hljs-operator">|</span> owner <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> Claws    <span class="hljs-operator">|</span> Gwen  <span class="hljs-operator">|</span> cat     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1994</span><span class="hljs-number">-03</span><span class="hljs-number">-17</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Bowser   <span class="hljs-operator">|</span> Diane <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-08</span><span class="hljs-number">-31</span> <span class="hljs-operator">|</span> <span class="hljs-number">1995</span><span class="hljs-number">-07</span><span class="hljs-number">-29</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Whistler <span class="hljs-operator">|</span> Gwen  <span class="hljs-operator">|</span> bird    <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-number">1997</span><span class="hljs-number">-12</span><span class="hljs-number">-09</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+---------+------+------------+------------+</span>
</code></pre>
<p>找出恰好包含五个字符的 name, 使用五个 <code>_</code> 匹配字符集的实例:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&apos;_____&apos;</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> name  <span class="hljs-operator">|</span> owner  <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> Claws <span class="hljs-operator">|</span> Gwen   <span class="hljs-operator">|</span> cat     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1994</span><span class="hljs-number">-03</span><span class="hljs-number">-17</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Buffy <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-05</span><span class="hljs-number">-13</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
</code></pre>
<p> MySQL 提供的另一种模式匹配是使用扩展正则表达式. 当你测试这种类型模式的匹配时, 使用 <a href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-like" target="_blank"><code>REGEXP_LIKE()</code></a> 函数 (或者 <a href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_regexp" target="_blank"><code>REGEXP</code></a> 或者 <a href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_regexp" target="_blank"><code>RLIKE</code></a> 操作符, 它们是 <a href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-like" target="_blank"><code>REGEXP_LIKE()</code></a> 的同义词).</p>
<p>下列列表描述了正则表达式的一些特性:</p>
<ul>
<li><p><code>.</code> 匹配任何单个字符.</p>
</li>
<li><p>字符类 <code>[...]</code> 匹配括号内的任何字符. 例如, <code>[abc]</code> 匹配 a, b, 或者 c. 要命名一个字符范围, 请使用破折号. <code>[a-z]</code> 匹配任何字母, <code>[0-9]</code> 匹配任何数字.</p>
</li>
<li><p><code>*</code> 匹配前一项的零个或者多个实例. 例如, <code>x*</code> 匹配任意数量的 <code>x</code> 字符, <code>[0-9]*</code> 匹配任意数量的数字, <code>.*</code> 匹配任意数量的任何字符.</p>
</li>
<li><p>如果正则表达式模式匹配正在测试的值中的任何位置, 则该模式匹配成功. (这与 <a href="https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_like" target="_blank"><code>LIKE</code></a> 模式匹配不同, 如果模式匹配真个值时才会成功.)</p>
</li>
<li><p>如果要匹配被测试值的开头或者结束, 请在模式的开始添加 <code>^</code> 或者在结尾添加 <code>$</code>.</p>
</li>
</ul>
<p>为了演示扩展正则表达式是如何工作的, 这里使用 <a href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-like" target="_blank"><code>REGEXP_LIKE()</code></a> 重写了前面的 <a href="https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_like" target="_blank"><code>LIKE</code></a> 查询.</p>
<p>找出以 <code>b</code> 开头的 name, 使用 <code>^</code> 匹配 name 的开头:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-string">&apos;^b&apos;</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> owner  <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> Buffy  <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-05</span><span class="hljs-number">-13</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Bowser <span class="hljs-operator">|</span> Diane  <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1979</span><span class="hljs-number">-08</span><span class="hljs-number">-31</span> <span class="hljs-operator">|</span> <span class="hljs-number">1995</span><span class="hljs-number">-07</span><span class="hljs-number">-29</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+------------+</span>
</code></pre>
<p>To force a regular expression comparison to be case sensitive, use a case-sensitive collation, or use the <a href="https://dev.mysql.com/doc/refman/8.0/en/cast-functions.html#operator_binary" target="_blank"><code>BINARY</code></a> keyword to make one of the strings a binary string, or specify the <code>c</code> match-control character. Each of these queries matches only lowercase b at the beginning of a name:</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-string">&apos;^b&apos;</span> <span class="hljs-keyword">COLLATE</span> utf8mb4_0900_as_cs);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-type">BINARY</span> <span class="hljs-string">&apos;^b&apos;</span>);
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-string">&apos;^b&apos;</span>, <span class="hljs-string">&apos;c&apos;</span>);
</code></pre>
<p>To find names ending with <code>fy</code>, use <code>$</code> to match the end of the name:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-string">&apos;fy$&apos;</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> name   <span class="hljs-operator">|</span> owner  <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> Fluffy <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> cat     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1993</span><span class="hljs-number">-02</span><span class="hljs-number">-04</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Buffy  <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-05</span><span class="hljs-number">-13</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------+--------+---------+------+------------+-------+</span>
</code></pre>
<p>To find names containing a <code>w</code>, use this query:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-string">&apos;w&apos;</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> name     <span class="hljs-operator">|</span> owner <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death      <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+---------+------+------------+------------+</span>
<span class="hljs-operator">|</span> Claws    <span class="hljs-operator">|</span> Gwen  <span class="hljs-operator">|</span> cat     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1994</span><span class="hljs-number">-03</span><span class="hljs-number">-17</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Bowser   <span class="hljs-operator">|</span> Diane <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-08</span><span class="hljs-number">-31</span> <span class="hljs-operator">|</span> <span class="hljs-number">1995</span><span class="hljs-number">-07</span><span class="hljs-number">-29</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Whistler <span class="hljs-operator">|</span> Gwen  <span class="hljs-operator">|</span> bird    <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span> <span class="hljs-operator">|</span> <span class="hljs-number">1997</span><span class="hljs-number">-12</span><span class="hljs-number">-09</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>       <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+-------+---------+------+------------+------------+</span>
</code></pre>
<p>Because a regular expression pattern matches if it occurs anywhere in the value, it is not necessary in the previous query to put a wildcard on either side of the pattern to get it to match the entire value as would be true with an <a href="GLOSSARY.html#sql" class="glossary-term" title="The Structured Query Language that is standard for performing database operations. Often divided into the categories DDL, DML, and queries. MySQL includes some additional statement categories such as replication. See Chapter 9, Language Structure for the building blocks of SQL syntax, Chapter 11, Data Types for the data types to use for MySQL table columns, Chapter 13, SQL Statements for details about SQL statements and their associated categories, and Chapter 12, Functions and Operators for standard and MySQL-specific functions to use in queries.">SQL</a> pattern.</p>
<p>To find names containing exactly five characters, use <code>^</code> and <code>$</code> to match the beginning and end of the name, and five instances of <code>.</code> in between:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-string">&apos;^.....$&apos;</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> name  <span class="hljs-operator">|</span> owner  <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> Claws <span class="hljs-operator">|</span> Gwen   <span class="hljs-operator">|</span> cat     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1994</span><span class="hljs-number">-03</span><span class="hljs-number">-17</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Buffy <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-05</span><span class="hljs-number">-13</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
</code></pre>
<p>You could also write the previous query using the <code>{n}</code> (“repeat-<code>n</code>-times”) operator:</p>
<pre><code class="lang-sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> pet <span class="hljs-keyword">WHERE</span> REGEXP_LIKE(name, <span class="hljs-string">&apos;^.{5}$&apos;</span>);
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> name  <span class="hljs-operator">|</span> owner  <span class="hljs-operator">|</span> species <span class="hljs-operator">|</span> sex  <span class="hljs-operator">|</span> birth      <span class="hljs-operator">|</span> death <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
<span class="hljs-operator">|</span> Claws <span class="hljs-operator">|</span> Gwen   <span class="hljs-operator">|</span> cat     <span class="hljs-operator">|</span> m    <span class="hljs-operator">|</span> <span class="hljs-number">1994</span><span class="hljs-number">-03</span><span class="hljs-number">-17</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Buffy <span class="hljs-operator">|</span> Harold <span class="hljs-operator">|</span> dog     <span class="hljs-operator">|</span> f    <span class="hljs-operator">|</span> <span class="hljs-number">1989</span><span class="hljs-number">-05</span><span class="hljs-number">-13</span> <span class="hljs-operator">|</span> <span class="hljs-keyword">NULL</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------+--------+---------+------+------------+-------+</span>
`
</code></pre>
<p>For more information about the syntax for regular expressions, see <a href="https://dev.mysql.com/doc/refman/8.0/en/regexp.html" target="_blank">Section 12.5.2, “Regular Expressions”</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="working-with-null.html" class="navigation navigation-prev " aria-label="Previous page: 处理 NULL 值">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="counting-rows.html" class="navigation navigation-next " aria-label="Next page: 计算行数">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"模式匹配","level":"1.4.3.4.7","depth":4,"next":{"title":"计算行数","level":"1.4.3.4.8","depth":4,"path":"counting-rows.md","ref":"counting-rows.md","articles":[]},"previous":{"title":"处理 NULL 值","level":"1.4.3.4.6","depth":4,"path":"working-with-null.md","ref":"working-with-null.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"zh-hans","gitbook":"*"},"file":{"path":"pattern-matching.md","mtime":"2023-05-27T13:02:39.322Z","type":"markdown"},"gitbook":{"version":"4.0.7","time":"2023-05-27T13:02:45.779Z"},"basePath":".","book":{"language":"zh-cn"}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

